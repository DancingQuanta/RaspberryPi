#!/usr/bin/pdmenu -c
preproc: echo "Title: Raspberry Service"
color:desktop:blue:gray
color:title:yellow:red
color:base:white:green
color:menu:white:cyan
color:selbar:white:black
color:selbarhot:yellow:black
color:menuhot:yellow:cyan

menu:home:Home Menu:Welcome to pdmenu
        show:_Transmission::Transmission
        show:_Minidlna::Minidlna
        show:_GoPro::Gopro
        show:_Remote Control::RC
        nop
        show:_System::System
        show:_Network Configuration::network_conf
        exec:_Reboot::clear;reboot
        exec:_Change Password:pause:clear;passwd
        show:_Test::main
        show:_Dropbox::dropbox
        nop
        exit:E_xit

menu:RC:Remote Control:Update Remote Control
        exec:_Update:pause: \
               wget -O rc.zip https://github.com/ManuCart/Raspberry-Control/archive/master.zip; \
                unzip rc.zip; \
                rm rc.zip; \
                mv -u Raspberry-Control-master/* .rc; \
                mv -u Raspberry-Control-master/public/* .rc/public; \
                rm -r Raspberry-Control-master
        exit:E_xit

menu:Gopro:Gopro:Gopro videos to YouTube
        exec:_Update go_pro:pause:wget -O gopro https://raw.github.com/ManuCart/GoPro/master/gopro.sh
        exec:_New Session:clear:tmux new -s Gopro
        exec:_Session Gopro:clear:tmux attach-session -t Gopro
        exec:_GoPro to Youtube:gopro -f /media/hdd/gopro -c -g
        nop
        exit:E_xit
        
menu:System:System:System
        exec:_Update:pause:sudo apt-get -y autoremove;sudo apt-get update;sudo apt-get -y upgrade;sudo apt-get -y dist-upgrade
        exec:Update _pdm:truncate:curl -o pdm https://raw.githubusercontent.com/ManuCart/ServicePi/master/pdmenu
        exec:Update _rs:pause:wget -O rs https://raw.github.com/ManuCart/Raspberry-Service/master/rs.sh
        exec:Update _gdrive:pause:wget -O gdrive https://raw.github.com/ManuCart/gdrive-pdf-fusion/master/gdrive.rb
        exec:Update x_mpp:pause:wget -O xmpp.rb https://raw.github.com/ManuCart/ruby-xmpp/master/xmpp.rb
        nop
        exit:E_xit
 
menu:Transmission:Transmission:Transmission
        exec:_Start:truncate:sudo service transmission-daemon start
        exec:Sto_p:truncate:sudo service transmission-daemon stop
        exec:S_tatus:truncate:sudo service transmission-daemon status
        nop
        exit:E_xit
        
menu:Minidlna:Minidlna:Minidlna
        exec:_Reload:truncate:sudo service minidlna force-reload
        exec:S_tatus:truncate:sudo service minidlna status
        nop
        exit:E_xit
 
menu:dropbox:dropbox:dropbox
	exec:_Chmod Hdd:truncate:sudo chmod 777 -R /media/hdd/
	exec:_Upload:exec: \
		tmux has-session -t dropbox \
  		if [ "$?" -eq 1 ] ; then tmux new-session -d -s dropbox ; fi \
		tmux send -t dropbox "./dropbox_uploader.sh -s upload ~Dir upload:/media/hdd/dropbox/~ /raspberry/" ENTER;
	exec:_Session:display:tmux attach-session -t dropbox
	exit:E_xit

menu:network_conf:Network Configuration:Network Configuration
        show:<Network Configuration>::
        nop
        exec:   Show IP Address and Subnet:display:/sbin/ifconfig eth0
        exec:   Show Routes:display:/sbin/route -n
        nop
        exec:   Change IP Address and Subnet:edit,pause:clear;sudo /sbin/ifconfig eth0 ~New IP Address:~ netmask ~New Subnet$
        exec:   Add Default Gateway:edit,pause:clear;sudo /sbin/route add default gw ~Default Gateway:~
        exec:   Add Route:edit,pause:clear;sudo /sbin/route add -net ~Destination:~ netmask ~Subnet:~ gw ~Gateway:~
        exec:   Remove Default Gateway:edit,pause:clear;sudo /sbin/route del default gw ~Default Gateway:~
        exec:   Remove Route:edit,pause:clear;sudo /sbin/route del -net ~Destination:~ netmask ~Subnet:~ gw ~Gateway:~
        nop
        exec:   Ping:edit,pause:clear;ping ~Address:~
        exec:   Show netstat:display:netstat -tuna
        nop
        exit:E_xit
	# File manager
menu:main:main:Main Menu
group:_Edit a file
    exec::makemenu: (\
            ./editdir.pl `pwd` "" show_directory \
            ) 2>/dev/null
    show:::show_directory
    remove:::show_directory
endgroup
group:_Remove a file or directory
    exec::makemenu: (\
            ./deldir.pl `pwd` "" del_directory \
            ) 2>/dev/null
    show:::del_directory
    remove:::del_directory
endgroup
group:Add a _directory
    exec::makemenu: (\
            ./adddir.pl `pwd` "" add_directory \
            ) 2>/dev/null
    show:::add_directory
    remove:::add_directory
endgroup
group:Add a _file
    exec::makemenu: (\
            ./addfile.pl `pwd` "" add_file \
            ) 2>/dev/null
    show:::add_file
    remove:::add_file
endgroup
nop
exit:E_xit
